@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-bg-primary: #ffffff;
    --color-bg-secondary: #f8fafc;
    --color-bg-tertiary: #f1f5f9;
    --color-text-primary: #0f172a;
    --color-text-secondary: #475569;
    --color-text-muted: #94a3b8;
    --color-border: #e2e8f0;
    --color-border-hover: #cbd5e1;
  }

  .dark {
    --color-bg-primary: #0f172a;
    --color-bg-secondary: #1e293b;
    --color-bg-tertiary: #334155;
    --color-text-primary: #f8fafc;
    --color-text-secondary: #cbd5e1;
    --color-text-muted: #64748b;
    --color-border: #334155;
    --color-border-hover: #475569;
  }

  * {
    font-family: 'Cairo', sans-serif;
  }

  body {
    @apply bg-[var(--color-bg-primary)] text-[var(--color-text-primary)] transition-colors duration-300;
    direction: rtl;
  }

  /* Mobile-only: Prevent horizontal overflow */
  @media (max-width: 640px) {
    html, body {
      overflow-x: hidden;
      max-width: 100vw;
    }
    
    * {
      max-width: 100%;
    }
    
    img {
      max-width: 100%;
      height: auto;
    }
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Mobile-only: Smaller buttons */
  @media (max-width: 640px) {
    .btn {
      @apply px-3 py-1.5 text-xs;
    }
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 dark:bg-primary-500 dark:hover:bg-primary-600;
  }

  .btn-secondary {
    @apply btn bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] hover:bg-[var(--color-border)] focus:ring-primary-500;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }

  .btn-success {
    @apply btn bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-500;
  }

  .card {
    @apply bg-[var(--color-bg-primary)] rounded-xl border border-[var(--color-border)] shadow-sm;
  }

  /* Mobile-only: Smaller card padding */
  @media (max-width: 640px) {
    .card {
      @apply p-3;
    }
  }

  .input {
    @apply w-full px-4 py-2.5 rounded-lg border border-[var(--color-border)] bg-[var(--color-bg-primary)] text-[var(--color-text-primary)] placeholder-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }

  /* Mobile-only: Smaller input padding and text */
  @media (max-width: 640px) {
    .input {
      @apply px-3 py-2 text-xs;
    }
  }

  .select {
    @apply input appearance-none bg-no-repeat pr-10;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: left 0.5rem center;
    background-size: 1.5em 1.5em;
  }

  .label {
    @apply block text-sm font-medium text-[var(--color-text-secondary)] mb-1.5;
  }

  /* Mobile-only: Smaller label text */
  @media (max-width: 640px) {
    .label {
      @apply text-xs mb-1;
    }
  }

  .table-container {
    @apply overflow-x-auto rounded-lg border border-[var(--color-border)];
  }

  .table {
    @apply w-full text-right;
  }

  .table th {
    @apply px-4 py-3 text-xs font-bold uppercase tracking-wider text-[var(--color-text-muted)] bg-[var(--color-bg-secondary)] border-b border-[var(--color-border)];
  }

  .table td {
    @apply px-4 py-3 text-sm text-[var(--color-text-secondary)] border-b border-[var(--color-border)];
  }

  /* Mobile-only: Smaller table padding and text */
  @media (max-width: 640px) {
    .table th {
      @apply px-2 py-1.5 text-[10px];
    }
    
    .table td {
      @apply px-2 py-1.5 text-xs;
    }
  }

  .table tr:hover td {
    @apply bg-[var(--color-bg-secondary)];
  }

  .table tr:last-child td {
    @apply border-b-0;
  }

  .badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold;
  }

  .badge-success {
    @apply badge bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400;
  }

  .badge-warning {
    @apply badge bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400;
  }

  .badge-danger {
    @apply badge bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400;
  }

  .badge-info {
    @apply badge bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400;
  }

  .badge-gray {
    @apply badge bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300;
  }

  .stat-card {
    @apply card p-6 hover:shadow-md transition-shadow duration-200;
  }

  /* Mobile-only: Smaller stat-card padding */
  @media (max-width: 640px) {
    .stat-card {
      @apply p-3;
    }
  }

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-lg text-[var(--color-text-secondary)] hover:bg-[var(--color-bg-tertiary)] hover:text-[var(--color-text-primary)] transition-colors duration-200;
  }

  .sidebar-link.active {
    @apply bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400;
  }

  .page-header {
    @apply mb-6 pb-4 border-b border-[var(--color-border)];
  }

  .page-title {
    @apply text-2xl font-bold text-[var(--color-text-primary)] pr-20;
  }

  .page-subtitle {
    @apply text-[var(--color-text-muted)] mt-1;
  }

  /* Mobile-only: Smaller page title and subtitle */
  @media (max-width: 640px) {
    .page-title {
      @apply text-lg pr-2;
    }
    
    .page-subtitle {
      @apply text-xs;
    }
  }

  /* Add padding for main page titles to avoid burger menu overlap */
  main h1.text-3xl {
    padding-right: 5rem;
  }

  /* Mobile-only: Prevent horizontal overflow and adjust main padding */
  @media (max-width: 640px) {
    main h1.text-3xl {
      padding-right: 1rem;
      font-size: 1.25rem;
    }
    
    main h1.text-xl,
    main h1.text-2xl {
      font-size: 1.125rem;
      padding-right: 0.5rem;
    }
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-[var(--color-bg-secondary)];
}

::-webkit-scrollbar-thumb {
  @apply bg-[var(--color-border)] rounded-full hover:bg-[var(--color-border-hover)];
}

/* Animations */
.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-stagger > * {
  animation: slideUp 0.4s ease-out forwards;
  opacity: 0;
}

.animate-stagger > *:nth-child(1) { animation-delay: 0.05s; }
.animate-stagger > *:nth-child(2) { animation-delay: 0.1s; }
.animate-stagger > *:nth-child(3) { animation-delay: 0.15s; }
.animate-stagger > *:nth-child(4) { animation-delay: 0.2s; }
